# 自助餐厅在线订购管理系统的设计和实现
> @author Jafeney Lou  <jiafneg.lou@husor.com> <br/>
> @createTime 2016-03-12

## 研究综述
> ［摘要］随着智能移动设备的普及,移动互联网在生活中的重要性越来越明显,为了适应快速发展的Web技术以及不断提出的移动Web应用需求,HTML5应运而生。传统餐饮管理系统功能有限，很难满足移动端访问和快捷预定等功能。 本文介绍了该课题的研究意义，对国内外的餐饮管理系统进行了分析和比较，列举了餐饮管理系统所需要实现的一些基本功能，了解大多数信息管理系统所存在的漏洞和问题，并结合大量材料，对基于HTML5的自助餐厅管理系统的发展趋势进行了分析。

> ［关键词］HTML5，移动开发，餐饮服务，管理系统，B/S模式

### 项目背景和意义
随着经济的发展 ，服务类行业也越来越受到人们的关注。如果投资者没有相关知识与管理经验，在开办餐厅的过程中难免会遇到各种各样的问题，比如顾客流量、消费分析和财务统计等。另一方面，随着智能移动设备普及，人们越来越倾向于利用移动智能设备进行娱乐和消费，未来的趋势应该是越来越简单和快捷。一个优秀的餐厅管理系统不仅可以针对消费者提供安全便捷的服务，又可以为餐厅投资者带来精准可视化的统计和分析，引导餐厅管理者高效便捷地进行管理。

### 国外研究现状
国外无线智能设备普及地比较早，它的餐饮管理系统不再只局限于传统的PC设备，而是能运行在IPad、IPhone等智能无线设备中，方便顾客和管理者使用。实现的需求一般有如下几个要求：<br/>
1) 预定管理<br/>
可按照餐厅实际布局显示餐厅所有台位状态,可跨任意日期、餐段进行预定、支持预定点菜功能、预定提醒、预定排桌功能,可根据客人要求调整桌台布局,可打印桌台布局图传真给客人确认。<br/>
2) 来电通 <br/>
可根据客户来电自动显示客户姓名、单位、历史就餐餐位、历史就餐时间等客人信息
3) 无线设备点菜 <br/>
可查询预定客人姓名、喜好、忌讳等信息,方便服务人 员做个性化服务。支持分类、拼音速查码、编号多种输入 点菜方式;支持临时菜品(菜单上不存在菜品)与客户要求，手写输入等。<br/>
4) 厨房打印 <br/>
可按菜品类别自动分单打印。可多菜一单或一菜一 单打印,打印菜品的中、英名称及客户的特殊要求,可按点 菜顺序或设定好的出菜顺序打印,支持一联或多联菜单。<br/>
5) 出菜管理 <br/>
支持条码扫描划菜、键盘输入划菜;支持出菜顺序控制与提示;可查询每桌菜肴制作、完成等状态;可查询某个菜品有哪些桌台点取;可查询超时未出菜品情况;菜品完成信息自动反馈到前台电脑与无线客户端。<br/>
6) 经理查询与报表 <br/>
实时查询所有桌台包房预定、就餐、营业收入情况。可查询每桌菜品落单时间、出品时间,方便管理人员对厨房出品进行监控;可查询每笔帐单结算付款情况,各种财务报表与稽核报表情况等。<br/>
7) 库存管理 <br/>
采购入库、直拨、调拨、领料等各种出入库业务处理,盘点业务处理,成品销售可直接减库存;各种仓库报表,如 进销存日报表、销存月报表、仓库收发存明细表等;供应商 采购统计报表;短缺、过量储存报警。<br/>
8) 会员客户管理 <br/>
记录个人客户、单位客户的详细资料，如姓名、生日、喜好、忌讳等信息。签单客户的管理、客户信用额度管理，各种会员卡的发放、重置、作废、查询和和管理，会员消费明细查询，会员积分管理等。<br/>
9) 数据维护 <br/>
人员与权限设置:员工基本资料维护、人员权限管理, 可控制到每个功能与报表权限。菜品物料资料设置:分为菜品维护、菜品类别维护、套餐维护、时特价维护、制作方法、口味、退单原因、菜品估清等维护;可设置每个菜品的标准成本卡;可按星期、餐别设 置时特价;可设置菜品类别的出菜顺序。餐厅与桌台设置:财务设置,分为折扣模版设置、付款 方式设置、附加费用设置、结算备注设置等。库存设置:分为供应商维护、物料类别维护、物料维护、单位维护、收发存项目维护等。系统设置:对帐单打印次数设置,防止利用帐单重复收款;结算时检查菜品是否已制作完成设置;外卖销售功能设置,结算时使用附加费用设置;对帐单抬头与标注设置;桌台状态颜色设置。

### 国内研究现状
国内对于这方面的研究的热点往往是在中小型企业，目的也很明确——为小型餐饮企业设计一个能减少小型企业经营成本,提升的运营效率、提高的管理效益的适合小型餐饮管理软件的餐饮管理系统。餐饮管理系统主要是对餐饮业务运行过程中人流、物流、资金流、信息流的管理,采用先进技术来开发系统能更有效地降低成本,提高经营效率。因此经过一些需求的调查总结归纳了以下几点: <br/>
1) 预订管理, 根据客人的要求为客人提供预订餐台的服务。 <br/>
2) 顾客开单, 根据现有的可供预订的桌子为客人开单并纪录顾客人数,并且输入顾客所点的菜品,在顾客消费完后。 <br/>
3) 顾客买单, 为已消费完的客人提供结账服务会员有折扣优惠。 <br/>
4) 打印清单, 在顾客消费结束,打印消费清单以便查询。 <br/>
5) 会员管理, 根据餐饮企业的的服务政策,对会员信息进行管理以及提供相应的服务。 <br/>
6) 商品管理, 对菜品,酒水的增删改。 <br/>
7) 报表查询, 查询餐饮企业在某个时间段内的营业额,销售情况等,并打印报表。<br/>

而系统一般分为 6 个子系统管理模块 ——顾客开单、快餐外卖、商品管理、财务管理、会员管理、系统设置。 <br/>
顾客开单模块:该模块主要是对顾客所点的菜单进行输入,以及用完餐后的买单付款。 主要功能包括: <br/>
1) 选择顾客用餐时所在的餐台 <br/>
2) 输入顾客点单时所选择的菜品 <br/>
3) 对顾客所在的餐台的消费情况进行买单 <br/>
4) 查询该餐台的使用记录以及一些消费信息 <br/>
5) 打印消费账单  <br/>
快餐外卖模块: 该模块主要是输入外卖需送达的地址,送餐时间,顾客联系电话,相关备注,以及所需要的菜品。  <br/>
商品管理模块: 该模块主要是对餐饮系统中的菜品以及菜品的价格进行增删改。  <br/>
财务管理模块: 该模块的主要功能是对餐厅的一些消费情况进行查询,其中包括消费记录的查询,销售额统计报表,冷菜销售额统计,热菜销售额统计,热门菜肴统计等。 <br/>
会员管理模块: 该模块的主要功能是对餐厅会员进行管理,其中包括对餐厅会员的增删改,对会员信息进行修改。 <br/>
系统设置模块:本系统是使用于小型餐饮企业的餐饮管理系统,所以系统设置这一项是非常精简的,目前系统设置的功能只有对系统操作人员的增加,删除,权限的更改。

### 发展趋势
随着智能移动设备的普及,移动互联网在生活中的重要性越来越明显,为了适应快速发展的Web技术以及不断提出的移动Web应用需求,HTML5应运而生。基于HTML5开发应用可以做到“一次开发, 多平台使用”,开发者无需把时间浪费在修改移植上。 HTML5在应用维护的方面的优势更是明显,开发者只 需维护一个版本。同时,用户端的更新也可以更加方 便快捷。因此HTML5极具成本效益,能够降低人力投入。而且HTML5可以无缝地连接PC端和移动端。在使用Web App的时候,桌面端和移动端不再是独立的 两个点,它们将可以更好地共享资源和数据。

于此同时，传统餐饮管理系统受到硬件和软件的诸多限制，无法满足人们日新月异的移动消费需求。因此餐饮管理系统未来的发展应该一方面围绕为客户提供便捷、智能的消费方式，一方面利于商家对客户消费信息的进行合理数据分析从而做出价格和经营方式的调整。所以必然会诞生两个版本 —— 客户版和商家版。客户版围绕客户，内容要精简实用、操作要智能简单，从而受众面可以是任何会使用智能手机的用户。 商家版要围绕管理者，引导餐厅管理者高效便捷地进行管理，核心包括运营客户版的内容，提供更多优质的服务和实惠，从而吸引更多的客户；管理餐厅的大小事务，小到库存管理，大到财务统计和数据分析，餐厅运行的每一环都要透明地捏在管理者的手中，既要保证系统的安全性和稳定性，又要保证低门槛的操作性和对未知方向的可拓展性。当然基于目前的移动web趋势，客户版和商家版还应该遵循移动优先的原则，同时要具杯跨平台和跨设备访问的能力。

### 参考文献
> [1] Xiaolin Yi，《The Development of a Mobile Terminal Middleware Platform Based on HTML5》，JOURNAL OF SOFTWARE, VOL. 8, NO. 5, MAY 2013 <br/>
  [2] Ogunlolu O. Isaac，《HTML5, the future of mobile applications:A comparison between HTML5 application development platforms and native platforms》，The Bachelor’s Thesis of degree programme in Information Technology Kemi 2012 <br/>
  [3]《Mobile App versus Web App: a Comparison Using 2008-2012 "PubMed for Handhelds" Server Data》， Paul Fontelo, MD, MPH and Fang Liu, MS National Library of Medicine, Bethesda, MD 20894 <br/>
  [4] 《Pew Internet Mobile Health》 2012. Nov 8, 2012. http://www.pewinternet.org/Reports/2012/Mobile-Health.aspx <br/>
  [5] 《Among U.S. Social Network Users, Smartphone Apps Trump the Mobile Web》, Dec 2, 2012. http://allthingsd.com/20121202/among-u-s-social-networks-smartphone-apps-trump-the-mobile-web/ <br/>
  [6] 《Mobile Usage in the Medical Space Report & Infographic》. AmericanEHR blog，March 6, 2013. http://www.americanehr.com/blog/2013/03/mobile-usage-in-the-medical-space-infographic/ <br/>
  [7] 蔡恒强，《MVC模式下餐饮管理系统设计与实现》， Com puterKnowledge and Technology，第 9 卷第 06 期，Vol.9, No.6, February 2013. <br/>
  [8] 黄永慧,陈程凯，《HTML5在移动应用开发上的应用前景》，计算机技术与发展。第23卷，第7期，2013年7月，01.23 No.7 July 2013 <br/>
  [9] 邢晓鹏，《HTML5核心技术的研究与价值分析》，价值工程，2011(22) <br/>
  [10] 刘斌，《HTML5-未来网络应用的核心技术研究》自动化与仪器仪表，2010(04) <br/>
  [11] 刘铁锋，《WebApp框架发展趋势及现状分析》， Mobile移动，2011 <br/>
  [12] 孙宇，《餐厅自助点餐管理系统》，吉林大学硕士学位论文，2008(10) <br/>
  [13] 杨成栋，《联合式餐厅管理系统的开发与实现》，现代经济信息，1001-828X(2013)03-0168-01 <br/>
  [14] 万明,王闯，《基于无线终端的餐饮管理系统设计与实现》，软件导刊，13卷，第6期，2014年6月，Vol.13, No.6, June.2014. <br/>
  [15] 孙龙, 《自助餐厅结算系统开发实现》，软件开发与设计，DOI:10.16184/j.cnki.comprg.2011.06.016 <br/>
  [16] 王玉雯，《中小餐饮企业智能服务系统设计与实现》，电子科技大学，2016（3）

## 需求分析
在如今信息化应用广泛的餐饮市场中,一个具有统计分析功能，可以帮助经营者分析自己企业的经营状况并及时决策的餐饮管理系统对于一个餐饮企业不可或缺的。餐饮管理系统主要是对餐饮业务运行过程中人流、物流、资金流、信息流的管理,采用先进技术来开发系统能更有效地降低成本,提高经营效率。本系统的设计目标是考虑到身边一些小型的自助烧烤店在资金问题的状况下,为商家提供一套既能为顾客带来便利和实惠，又能减少企业经营成本,提升运营效率、提高的管理效益的在线订购管理系统，所以必然会诞生两个版本 —— 客户版和商家版。客户版围绕客户，内容要精简实用、操作要智能简单，从而受众面可以是任何会使用智能手机的用户。 商家版要围绕管理者，引导餐厅管理者高效便捷地进行管理，核心包括运营客户版的内容，提供更多优质的服务和实惠，从而吸引更多的客户；管理餐厅的大小事务，小到库存管理，大到财务统计和数据分析，餐厅运行的每一环都要透明地捏在管理者的手中，既要保证系统的安全性和稳定性，又要保证低门槛的操作性和对未知方向的可拓展性。当然基于目前的移动web趋势，客户版和商家版还应该遵循移动优先的原则，同时要具杯跨平台和跨设备访问的能力。

客户版功能要求：
>
 1. 支持智能移动设备（iPhone、iPad），并且在微信里能实现扫二维码快速访问。
 2. 精选餐厅的主打和推荐的菜式，按类别罗列，图片制作要精美，展示特效要酷炫，吸引顾客
 3. 消息推送。定期推送给客户一些餐厅的动态新闻、趣闻轶事、特色活动、企业文化等信息，在顾客心中刷存在感
 4.  在线预订。为客户提供一个人性化的在线预订功能，方便下次光临
 5.  会员登录、信息修改。 提供会员个人账号管理功能，保护隐私和账号安全
 6.  优惠券。  定期发放一些优惠券，为会员提供实实在在的优惠
 7.  消费纪录。会员每次消费都有帐可查，并能以图表的形式展现，方便个人理财
 8.  定位服务。能为会员提供即时定位和餐厅路线规划功能，无论在哪会员都找得到这家餐厅，想丢都难。
 9.  消费评价。客户可以对每次消费评价打分，顾客的意见是餐厅进步的动力。

商家版功能要求：
>
 1. 支持智能移动设备（iPhone、iPad）
 2. 菜式管理。 能按类别添加和编辑餐厅的菜式，并能统计当天的消费水平，从而判断主推和淘汰。
 3. 餐位管理。 能自由编辑餐位映射图，并能即时反馈餐厅当前的餐位占用情况和当日客流量状况，智能分析顾客的消费行为
 4. 采购管理。 能统计采购历史，新增采购清单。
 5. 订单管理。 能随时处理客户的买单请求，支持支付宝或者微信转账
 6. 会员管理。 能管理会员的基本信息，制定积分规则，编辑和发放优惠券等功能
 7. 财务统计。 能按天、按周、按月、按年分别统计餐厅的收支情况，并能利用图表可视化呈现和分析
 8. 信息推送。 能添加和编辑餐厅的动态新闻、趣闻轶事、特色活动、企业文化等信息推送到客户版。

## 功能模块设计
客户版设计
```
    |---- 精选
    |---- 动态
          |---- 详情页
    |---- 预定
    |---- 我
          |---- 登录
          |---- 账户信息
          |---- 优惠券
          |---- 消费管理
                |---- 消费统计
                |---- 消费评价
          |---- 关于我们
```

商户版设计
```
    |---- 登录
    |---- 菜式管理
          |---- 轮播配置
          |---- 分类清单
          |---- 新品预告
          |---- 当天消费水平
    |---- 餐位管理
		  |---- 当前餐位
          |---- 餐位调整
          |---- 客流分析
    |---- 采购管理
          |---- 采购统计
          |---- 新的采购
    |---- 订单管理
          |---- 订单统计
          |---- 结算收钱
    |---- 会员管理
          |----  会员统计
          |----  积分规则
          |----  优惠券
    |---- 财务管理
          |---- 收支统计
          |---- 财务分析
    |---- 信息推送
          |---- 推送统计
          |---- 新的推送
```

## 数据库设计


## 系统架构与技术方案
1) 页面搭建采用目前流行的响应式设计框架 `Bootstrap` <br/>
2) 开发模式采用前后端完全分离的方式，前端采用 `EJS+Ajax` 做模版视图的渲染工作,后端采用`NodeJS+Express+Mysql`提供API接口，连调工作都通过前端 `Javascript` 来完成。<br/>
3) 静态资源通过`gulp`自动化管理，包括 less编译、css压缩与合并、js语法校验和模块化以及压缩、EJS模板文件预编译、html压缩、图片压缩、livereload等一系类资源整合管理工作。

```
    |---- app
         |---- modules
              |---- database    //数据层
              |---- controller  //业务逻辑层
         |---- node_modules     //项目依赖的NodeJS模块
         |---- public  
              |---- html        //编译后的HTML
              |---- fonts       //编译后的Google字体
              |---- css         //编译后的css
              |---- js          //编译后的js
              |---- img         //编译后的img
         |---- routes           //路由层
              |---- users.js    //客户端的路由
              |---- admin.js    //商户端的路由
         |---- src
              |---- less        //开发时的less资源
              |---- js          //开发时的js资源
              |---- img         //开发时的img资源
         |---- views            //视图模板层
              |---- users       //客户端的ejs模板
              |---- admin       //商户端的ejs模板
         |---- app.js           //node服务启动文件  
         |---- gulpfile.js      //gulp打包配置文件  
         |---- .jshintrc        //jshintrc校验配置文件  
```
